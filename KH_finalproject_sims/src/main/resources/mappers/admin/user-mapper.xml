<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="adminUser">
	
	<!-- 관리자의 사용자 관리 리스트 -->
	<select id="selectUserList" resultType="adUserVo">
		/** 관리자의 사용자 관리 리스트 (selectUserList)**/
			SELECT
				C.*
			FROM
			(
			SELECT
				A.*
				, B.*
				, ROWNUM AS RO
			FROM 
				USER_TABLE A
				INNER JOIN MEMBER B ON A.USER_ID = B.ID
			WHERE 1=1
				<if test="searchUserId != '' and searchUserId != null">
					AND UPPER(A.USER_ID) LIKE UPPER('%'||#{searchUserId}||'%')
				</if>
				<if test="searchUserName != '' and searchUserName != null">
					AND UPPER(A.USER_NAME) LIKE UPPER('%'||#{searchUserName}||'%')
				</if>
				<if test="searchRadioVal == 'enable'">
					AND B.ENABLE = '2'
				</if>
				ORDER BY A.USER_WR_DATE DESC
				
				) C
			WHERE 1=1
				AND RO BETWEEN #{start} AND #{end}
	</select>
	
	<!-- 관리자의 사용자 관리 리스트 전체 개수-->
	<select id="selectUserListCnt" resultType="_int">
		/** 관리자의 사용자 관리 리스트 (selectUserListCnt)**/
			SELECT
				COUNT(*) AS TOTAL_ROW_COUNT
			FROM
				USER_TABLE A
				INNER JOIN MEMBER B ON A.USER_ID = B.ID
			WHERE 1=1
				<if test="searchUserId != '' and searchUserId != null">
					AND UPPER(A.USER_ID) LIKE UPPER('%'||#{searchUserId}||'%')
				</if>
				<if test="searchUserName != '' and searchUserName != null">
					AND UPPER(A.USER_NAME) LIKE UPPER('%'||#{searchUserName}||'%')
				</if>
				<if test="searchRadioVal == 'enable'">
					AND B.ENABLE = '2'
				</if>
	</select>
	
	<!-- <select id="selectUserList" resultType="adUserVo">
		/** 관리자의 사용자 관리 리스트 (selectUserList)**/
			SELECT
				*
			FROM
			(
			SELECT
				A.*
				, B.*
				, ROWNUM AS RO
			FROM 
				USER_TABLE A
				INNER JOIN MEMBER B ON A.USER_ID = B.ID
			WHERE 1=1
				<if test="searchUserId != '' and searchUserId != null">
					AND UPPER(A.USER_ID) LIKE UPPER('%'||#{searchUserId}||'%')
				</if>
				<if test="searchUserName != '' and searchUserName != null">
					AND UPPER(A.USER_NAME) LIKE UPPER('%'||#{searchUserName}||'%')
				</if>
				<if test="searchRadioVal == 'enable'">
					AND B.ENABLE = '2'
				</if>
	</select>-->
	
	<!-- 관리자의 사용자 관리 상세 -->
	<select id="selectUserDetail" resultType="adUserVo">
	/** 관리자의 사용자 관리 상세 (selectUserDetail)**/	
		SELECT
			*
		FROM
			USER_TABLE
		WHERE
			USER_ID = #{userId}		
	</select>
	
	<!-- 관리자의 사용자 관리 수정 -->
	<update id="saveUserModify" parameterType="adUserVo">
		/** 관리자의 사용자 관리 수정 (saveUserModify) **/
		UPDATE USER_TABLE
		SET
			USER_EMAIL = #{userEmail}
			, USER_PHONE = #{userPhone}
			, USER_UP_DATE = SYSDATE
		WHERE USER_ID = #{userId}	
	</update>
	
</mapper>
